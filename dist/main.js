(()=>{document.querySelector("#current");const e=document.querySelector("#cityName"),t=document.querySelector("#weather"),n=(document.querySelector("#time"),document.querySelector("#temp")),o=document.querySelector("#tempMin"),r=document.querySelector("#tempMax"),a=document.querySelector("#humidity"),c=document.querySelector("#pressure"),i=document.querySelector("#windSpeed"),d=document.querySelector("form"),l=document.querySelector("input");document.querySelector("#submit"),document.querySelector("#dailyBox");let u=[...document.querySelectorAll(".daily")];const m=document.querySelector("#timeDay"),h=document.querySelector("#timeDate"),p=document.querySelector("#timeHour");let s=[...document.querySelectorAll(".hourly")];const y=document.querySelector("#weatherIcon");async function w(d){try{let l={},u=`https://api.openweathermap.org/data/2.5/weather?q=${d}&appid=7c4c3da16d8dd1a6f355c9a526854dc0&units=metric`;const s=await fetch(u,{mode:"cors"}),w=await s.json();e.textContent=d.toUpperCase(),d.length>11?e.style.fontSize="1.5rem":e.style.fontSize="2rem",t.textContent=w.weather[0].main,y.src=`https://openweathermap.org/img/wn/${w.weather[0].icon}@2x.png`;let S=new Date(1e3*w.dt);m.textContent=S.toLocaleString("en-UK",{weekday:"long"}),h.textContent=S.toLocaleString("en-UK",{month:"long",day:"numeric"}),p.textContent=`${S.toLocaleString("en-UK",{hour:"numeric"})}:00`,n.textContent=`${Math.round(w.main.temp)}`,o.textContent=`Min: ${Math.round(w.main.temp_min)}°C`,r.textContent=`Max: ${Math.round(w.main.temp_max)}°C`,a.textContent=`Humidity: ${w.main.humidity}%`,c.textContent=`Pressure: ${w.main.pressure} hPa`,i.textContent=`Wind speed: ${w.wind.speed} m/s`,l.longitude=w.coord.lon,l.latitude=w.coord.lat,await w,x(l.latitude,l.longitude)}catch(e){alert(`Unable to find data for ${d}, restting to default`),w("london")}}async function x(e,t){try{let n=`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${t}&exclude=current,minutely,alerts&appid=7c4c3da16d8dd1a6f355c9a526854dc0&units=metric`;const o=await fetch(n,{mode:"cors"}),r=await o.json(),a=await r;a.daily.forEach(((e,t)=>{0!==t&&u.forEach((n=>{if(t===Number(n.id)){console.log(u[t-1].children);let n=new Date(1e3*e.dt);u[t-1].children[0].textContent=n.toLocaleString("en-UK",{weekday:"long"}),u[t-1].children[2].src=`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,u[t-1].children[3].textContent=e.weather[0].main,u[t-1].children[4].textContent=`H: ${Math.round(e.temp.max)}°C`,u[t-1].children[5].textContent=`L: ${Math.round(e.temp.min)}°C`,e.hasOwnProperty("rain")&&(u[t-1].children[1].textContent=`Rain: ${100*e.pop}%`)}}))})),a.hourly.slice(1,25).forEach(((e,t)=>{let n=new Date(1e3*e.dt);s[t].children[0].textContent=`${n.toLocaleString("en-UK",{hour:"numeric"})}:00`,s[t].children[4].textContent=`${Math.round(e.temp)}°C`,s[t].children[2].src=`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,s[t].children[1].textContent=`Rain: ${Math.round(100*e.pop)}%`,s[t].children[3].textContent=e.weather[0].main}))}catch(e){alert(`Unable to find data for ${city}, restting to default`),w("london")}}d.addEventListener("submit",(e=>{e.preventDefault(),w(l.value)})),w("london")})();