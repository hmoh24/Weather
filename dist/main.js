(()=>{document.querySelector("#current");const e=document.querySelector("#cityName"),t=document.querySelector("#weather"),n=document.querySelector("#time"),o=document.querySelector("#temp"),r=document.querySelector("#tempMin"),c=document.querySelector("#tempMax"),d=document.querySelector("#humidity"),i=document.querySelector("#pressure"),a=document.querySelector("#windSpeed"),l=document.querySelector("form"),u=document.querySelector("input"),m=(document.querySelector("#submit"),document.querySelector("#dailyBox"),[...document.querySelectorAll(".daily")]);function y(l){let u={};return fetch(`https://api.openweathermap.org/data/2.5/weather?q=${l}&appid=7c4c3da16d8dd1a6f355c9a526854dc0&units=metric`,{mode:"cors"}).then((function(e){return e.json()})).then((function(m){console.log(m),e.textContent=l.toUpperCase(),t.textContent=m.weather[0].main;let y=new Date(1e3*m.dt);return n.textContent=`${y.toLocaleString("en-UK",{weekday:"long",month:"long",day:"numeric",hour:"numeric"})}:00`,o.textContent=`${m.main.temp}`,r.textContent=`Min: ${m.main.temp_min}째C`,c.textContent=`Max: ${m.main.temp_max}째C`,d.textContent=`Humidity: ${m.main.humidity}%`,i.textContent=`Pressure: ${m.main.pressure}`,a.textContent=`Wind speed: ${m.wind.speed}`,u.longitude=m.coord.lon,u.latitude=m.coord.lat,u})).then((function(e){var t,n;t=u.latitude,n=u.longitude,fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t}&lon=${n}&exclude=current,minutely,alerts&appid=7c4c3da16d8dd1a6f355c9a526854dc0&units=metric`,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){var t;console.log(e),(t=e).daily.forEach(((e,n)=>{0!==n&&m.forEach((e=>{if(n===Number(e.id)){console.log(m[n-1].children);let e=new Date(1e3*t.daily[n].dt);m[n-1].children[0].textContent=e.toLocaleString("en-UK",{weekday:"long"}),m[n-1].children[3].textContent=t.daily[n].weather[0].main,m[n-1].children[4].textContent=`H: ${t.daily[n].temp.max}째C`,m[n-1].children[5].textContent=`L: ${t.daily[n].temp.min}째C`,t.daily[n].hasOwnProperty("rain")&&(m[n-1].children[1].textContent=`Rain: ${t.daily[n].rain}mm`),t.daily[n].hasOwnProperty("snow")&&(m[n-1].children[1].textContent=`Snow: ${t.daily[n].snow}mm`)}}))}))}))})).catch((function(e){console.log(e)})),u}y("london"),l.addEventListener("submit",(e=>{e.preventDefault(),y(u.value)}))})();